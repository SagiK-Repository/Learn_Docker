# 도커 한방에 정리 🐳

- 사이트 [도커 한방에 정리 🐳](https://www.youtube.com/watch?v=LXJhA3VWXFA)

### 도커 소개

- 도커?
  - 2021 StackOverflow 설문조사 : Git(84.94%) 다음으로 많이 사용하는 툴이 Docker(76.51%)이다.
  - 많은 개발자들이 Docker에 대해서 배우고 싶어한다.

<br>

### 도커의 정의
  - 애플리케이션을 패키징 할 수 있는 툴이다.
  - [-애플리케이션을 구동하는데 필요한 모든 것들-]을 [+도커 컨테이너 안에+] 담아넣는다.
  - [+컨테이너+]라고 불린느 하나의 작은 소프트웨어 유닛 안에, 우리 어플리케이션과 그에 필요한 시스템 툴, 환경설정, 디펜던시 하나를 묶어서 다른 서버/pc 어떤 곳에도 쉽게 배포하고 안정적으로 구동할 수 있게 도와주는 툴이다.
  - 테크놀러지가 발전함에 따라 우리 어플리케이션을 구동하는데 많은 준비과정이 필요한다. 외부라이브러리부터해서 환경설정, 환경변수, 버전이 다른문제 해결 등 수많은 사전작업이 필요한데, 이러한 수많은 번거로움을 도커를 통해 문제를 해결한다.
  - 도커에는 애플리케이션 뿐만 아니라 정상적으로 동작하게 하기 위한 라이브러리, 환경설정, 환경변수, 리소스들이 포함될 수 있다.
  - 어떤 pc에서도 언제든지 동일하게 구동할 수 있다.


<br>

### VM과 도커의 차이

- 도커의 컨테이너가 VM과 유사하다?
  - VM : 가상의 머신, 고립된 환경에서 진행한다. 무거운 운영체제를 포함한다.
    - Infrastructure - Hypervisor - [1 VM, Guest OS - Binaries - Libraries - App1] [2 VM, Guest OS - Binaries - Libraries - App2] [...]
  - Container : VM에서 경량화된 버전으로써, 무거운 OS대신 Container Engine이라는 소프트웨어를 설치하여 각각 어플리케이션을 고립된 환경에서 진행하게 해준다.
    - Infrastructure - Host OS - Container Engine - [1 Container, Binaries - Libraries - App1] [2 Container, Binaries - Libraries - App2] [...]
  - 이것이 가능하게 해주는 이유는 운영체제와 커널과 관련이 있다.
- 컨테이너가 동작하기 위해서는 컨테이너 엔진이 필요하다.
- 가장 많이 사용되는 컨테이너 엔진이 [+도커+]이다.


<br>

### 도커의 3대 구성요소! (순서)

- 도커 컨테이너를 만들기 위해서 필요한 3가지
  - 도커파일(Dockerfile)을 만들어야 한다.
    - 설명서, 레시피와 같다.
    - 어플리케이션을 구동하기 위해 꼭 필요한 파일들은 무엇이 있는지 기재 (Copy files)
    - 어떤 프레임 워크나 라이브러리를 설치해야 하는지(외부 Dependencies)를 기재 (Install dependencies)
    - 필요한 환경변수에 대해서 설정할 수 있다.
    - 어떻게 구동해야 하는지 스크립트도 포함할 수 있다.
  - 도커파일을 이용해서 이미지를 만든다.
    - 이미지 안에는 어플리케이션을 실행하는데 필요한 코드, 런타임 환경, 시스템, 시스템 라이브러리 등 모든 세팅들이 포함되어 있다.
    - 실행되고 있는 어플리케이션의 상태를 찰칵 스냅샷하여 이미지로 만들어 둔다.
    - 만들어진 이미지는 변경이 불가능한 불변상태이다.
  - 이미지를 만들어 컨테이너를 구동한다.
    - 컨테이너에는 Sandbox처럼 캡쳐해둔 어플리케이션의 이미지를 고립된 환경에서 개별적인 파일 시스템 안에서 실행할 수 있다.
    - 컨테이너 안에서 어플리케이션이 동작한다.
    - 컨테이너 안에서 파일도 만들고 수정도 가능하고, 개별적으로 설정이 가능하다.

<br>

### 도커 이미지 배포 과정

- 로컬머신에서 이미지를 만든다 > Container Registry에 PUSH한다 > Docker 엔진이 설치된 다른 pc에서 PULL한다 > 이미지를 그대로 실행한다.
- Container Registry
  - Public
    - dockerhub
    - RED HAT quay.io
    - GitHub Packages
  - Private
    - aws
    - Google Cloud
    - Microsoft Azure

<br>

### 마지막 총 정리

- 우리가 개발하는 로컬 머신에 도커를 설치한다.
- 다른 서버/pc에 도커를 설치한다.
- 어플리케이션이 동작하기 위한 도커파일 작성
- 도커파일을 빌드하여 이미지를 만든다.
- 이미지를 Container Registry에 올린다.
- 다른 서버/pc에서 이미지를 다운로드 받아서 컨테이너를 실행한다.

<br>

### 실습 프로젝트 소개

- 심플한 텍스트를 출력하는 어플리케이션을 만들고 도커로 전달한다.

<br>

## 실습

### 1. 도커 설치 

#### Docker 사용할 때

 - [도커 사이트](https://www.docker.com/)에 접속 > GetStarted > Docker Desktop > 운영체제에 맞는 것을 다운로드 받는다.
 - 설치한 후 도커 어플리케이션이 실행됨을 확인한다.

#### VScode 사용할 때

- 확장프로그램으로 Docker를 설치한다.

<br>

### 2. 노드 프로젝트 만들기

<br>

### 3. Dockerfile 만들기

<br>

### 4. 이미지 만들기

<br>

### 5. 도커 컨테이너 실행 

<br>

### 6. 컨테이너 확인

<br>

### 7. 이미지 배포 

<br>

<br>

<br>

